<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9.1: http://docutils.sourceforge.net/" />
<meta name="version" content="S5 1.1" />
<title>Building the PyCon 5K: Open Race Tracking</title>
<meta name="authors" content="Wayne Witzel III" />
<meta name="date" content="PyCarolinas - 10/20/2012" />
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7434 2012-05-11 21:06:27Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { /* line numbers */
  color: grey;
}

.code {
  background-color: #eeeeee
}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<script src="ui/pretty/slides.js" type="text/javascript"></script>
<link rel="stylesheet" href="ui/pretty/slides.css"
      type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/pretty/outline.css"
      type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/pretty/print.css"
      type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/pretty/opera.css"
      type="text/css" media="projection" id="operaFix" />

<style type="text/css">
#currentSlide {display: none;}
</style>
</head>
<body>
<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header">

</div>
<div id="footer">
<h1>Building the PyCon 5K: Open Race Tracking</h1>
<h2>Wayne Witzel III</h2>
</div>
</div>
<div class="presentation">
<div class="slide" id="slide0">
<h1 class="title">Building the PyCon 5K: Open Race Tracking</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Authors:</th>
<td>Wayne Witzel III</td></tr>
<tr><th class="docinfo-name">Date:</th>
<td>PyCarolinas - 10/20/2012</td></tr>
</tbody>
</table>
<!-- Definitions of interpreted text roles (classes) for S5/HTML data. -->
<!-- This data file has been placed in the public domain. -->
<!-- Colours
======= -->
<!-- Text Sizes
========== -->
<!-- Display in Slides (Presentation Mode) Only
========================================== -->
<!-- Display in Outline Mode Only
============================ -->
<!-- Display in Print Only
===================== -->
<!-- Display in Handout Mode Only
============================ -->
<!-- Incremental Display
=================== -->

</div>
<div class="slide" id="what-we-have">
<h1>What We Have</h1>
<ul class="simple">
<li>Bad Perl hacker until Python.  Came to Python via Zope in 1999.  Worked at
Digital Creations (aka Zope Corporation) until 2003.  Now a consultant with
Agendaless Consulting.</li>
<li>Primary author of: Pyramid web framework, Supervisor UNIX process control
system, Deform form system, Repoze collection of middleware, and other
unmentionables.  Contributor to Zope, WebOb, and other OSS projects.</li>
</ul>
</div>
<div class="slide" id="how-we-did-it">
<h1>How We Did It</h1>
<ul class="simple">
<li>If you follow these guidelines, your library will be useful for other
people in both the scenarios you expect and in ones you don't.</li>
<li>The importance of these guidelines increases along with the number of users
whom will depend upon your library.  The more people whom use your library,
the more likely it is that some of them will try to use your library in
unexpected ways.  Ex: someone will want to create two separate applications
that use your library in the same process.</li>
</ul>
</div>
<div class="slide" id="prototyping">
<h1>Prototyping</h1>
<ul class="simple">
<li>Library authors sometimes do the wrong things for the right reasons.</li>
<li>Incorrect assumptions of how people will need to use the library they're
developing.</li>
<li>Optimistic perception of what tradeoffs are acceptable for the sake of
convenience.</li>
<li>Skewed perception of &quot;cleanliness&quot;.</li>
</ul>
</div>
<div class="slide" id="coding">
<h1>Coding</h1>
<ul class="simple">
<li>Library: maintains none or little of its own state, no or few callbacks.</li>
<li>Framework: no or little state, but lots of callbacks.  Some frameworks
mutate or require global state (IMO inappropriately).  A web framework
instance is often fed to a global mainloop, but that doesn't mean it should
use globals with abandon.  Even then if the framework doesn't use global
state, with a little care, two framework instances can live in the same
process.</li>
<li>Application: maintains lots of state, can use global state with abandon.</li>
</ul>
</div>
<div class="slide" id="integration">
<h1>Integration</h1>
<ul class="simple">
<li>The assumption: &quot;clean&quot; == &quot;is maximally convenient for the case I presume
this code is going to be used in&quot;</li>
<li>The reality:  &quot;clean&quot; == &quot;maximally understandable; without surprises or
exceptions&quot;.</li>
<li>The fewer limiting assumptions made by the library, the fewer surprises it
will have and the more understandable it will be.</li>
<li>Ex: thread-local state management doesn't work in async systems without
magical intervention.</li>
</ul>
</div>
<div class="slide" id="what-we-learned">
<h1>What We Learned</h1>
<ul class="simple">
<li>During this talk, I call out antipattern examples from actual projects
(including my own).</li>
<li>If I use code from one of your projects as an antipattern example, it
doesn't mean I don't like you.</li>
<li>This talk is impossible to give without showing negative examples.  I'm
lazy and the best negative examples are those that already exist.</li>
</ul>
</div>
<div class="slide" id="what-we-need">
<h1>What We Need</h1>
<ul class="simple">
<li>Avoid the mutation of global (module-level) state when your library is
imported.</li>
<li>Avoid requiring that other people mutate global state to use your library.
Ex: telling people to set an environment variable or call a function
which mutates global state to use your library</li>
<li>If your library mutates global state when it's imported or you tell people
to mutate global state to use it, it's not really a library, it's kinda
more like an application.</li>
</ul>
</div>
<div class="slide" id="demo">
<h1>Demo</h1>
<ul class="simple">
<li>An import of another module or global.</li>
<li>Assignment of a variable name in the module to some constant value.</li>
<li>The addition of a function via a def statement.</li>
<li>The addition of a class via a class statement.</li>
<li>Control flow which may handles conditionals for platform-specific handling
or failure handling of the above.</li>
<li>Anything else will usually end in tears.</li>
</ul>
</div>
</div>
</body>
</html>
